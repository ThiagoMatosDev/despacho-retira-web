<div class="row">
  <div class="col-md-6 p-4 rounded-lg shadow-lg w-2/3 bg-blue-500">
    <div class="card flex-1">
      <div class="card-header">
        <h3>Consulta de Retirante</h3>
      </div>

      <div class="card-body">
        <!-- Se칞칚o de busca -->
        <div class="search-section">
          <div class="search-options">
            <button (click)="toggleSearchType()" class="btn btn-toggle" [class.active]="searchType === 'rg'">
              Buscar por RG
            </button>
            <button (click)="toggleSearchType()" class="btn btn-toggle" [class.active]="searchType === 'cpf'">
              Buscar por CPF
            </button>
          </div>

          <div class="search-field">
            <label>{{searchType === 'cpf' ? 'CPF' : 'RG'}} do Retirante</label>
            <div class="input-group">
              <input [(ngModel)]="identifier" [mask]="maskFormat" [placeholder]="placeholderText"
                class="form-control" />
              <button (click)="searchRetriever()" class="btn btn-primary">
                Pesquisar
              </button>
            </div>
          </div>
        </div>

        <!-- Dados do retirante -->
        <div *ngIf="retriever" class="retriever-info">
          <h4>Dados do Retirante</h4>
          <div class="info-grid">
            <div class="info-item">
              <span class="label">Nome:</span>
              <span class="value">{{retriever.name}}</span>
            </div>
            <div *ngIf="retriever.cpf" class="info-item">
              <span class="label">CPF:</span>
              <span class="value">{{retriever.cpf | mask: '000.000.000-00'}}</span>
            </div>
            <div *ngIf="retriever.rg" class="info-item">
              <span class="label">RG:</span>
              <span class="value">{{retriever.rg}}</span>
            </div>
            <div class="info-item">
              <span class="label">Autorizado:</span>
              <span class="value badge"
                [ngClass]="{'badge-success': retriever.authorized, 'badge-danger': !retriever.authorized}">
                {{retriever.authorized ? 'Sim' : 'N칚o'}}
              </span>
            </div>
          </div>

          <!-- Empresa vinculada -->
          <div *ngIf="business" class="business-info">
            <h4>Empresa Vinculada</h4>
            <div class="info-grid">
              <div class="info-item">
                <span class="label">Nome Fantasia:</span>
                <span class="value">{{business.name_fantasy}}</span>
              </div>
              <div class="info-item">
                <span class="label">Raz칚o Social:</span>
                <span class="value">{{business.razao_social}}</span>
              </div>
            </div>
          </div>

          <!-- Formul치rio de despacho -->
          <div class="dispatch-form">
            <h4>Registrar Retirada</h4>
            <div class="form-group">
              <label>N칰meros das Notas Fiscais</label>
              <input [(ngModel)]="invoiceNumbers" class="form-control"
                placeholder="Digite os n칰meros separados por v칤rgula" />
              <small>Exemplo: 12345, 67890, 54321</small>
            </div>

            <div class="form-group">
              <label>C칩digo do Almoxarife</label>
              <input [(ngModel)]="warehouseCode" class="form-control" placeholder="Digite o c칩digo" />
            </div>

            <button (click)="saveDispatch()" class="btn btn-submit">
              Registrar Retirada
            </button>
          </div>
        </div>

        <!-- Mensagens de status -->
        <div *ngIf="errorMessage" class="alert alert-error">
          {{errorMessage}}
        </div>
        <div *ngIf="successMessage" class="alert alert-success">
          {{successMessage}}
        </div>


        <!-- Resultado da nova busca -->
        <div *ngIf="result" class="retriever-info">
          <h4>Resultado da Retirada</h4>
          <div class="info-grid">
            <div class="info-item">
              <span class="label">Nome do Retirante:</span>
              <span class="value">{{ result.nomeRetirante }}</span>
            </div>
            <div class="info-item">
              <span class="label">C칩digo do Almoxarife:</span>
              <span class="value">{{ result.codigoAlmoxarife }}</span>
            </div>
            <div class="info-item">
              <span class="label">Auto Pe칞as:</span>
              <span class="value">{{ result.nomeAutopecas }}</span>
            </div>
            <div class="info-item">
              <span class="label">Data e Hora:</span>
              <span class="value">{{ result.dataHora }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-md-6 p-4 rounded-lg shadow-lg w-1/3 bg-green-500">
    <div class="card flex-1">
  <!-- NOVA FUNCIONALIDADE: Buscar por Auto Pe칞as / C칩digo do Almoxarife -->
  <hr style="margin: 2rem 0;" />
  <div class="search-section">

    <!-- Op칞칫es de pesquisa j치 vis칤veis -->
    <h4>Escolha o tipo de pesquisa:</h4>
    <div class="search-options">
      <button class="btn btn-toggle" (click)="selectCategory('autoparts')"
        [class.active]="searchCategory === 'autoparts'">
        游댢 Auto Pe칞as
      </button>
      <button class="btn btn-toggle" (click)="selectCategory('almoxarife')"
        [class.active]="searchCategory === 'almoxarife'">
        游녻 C칩digo do Almoxarife
      </button>
    </div>

    <div *ngIf="searchCategory" class="search-field">
      <label>
        {{ searchCategory === 'autoparts' ? 'Nome da Auto Pe칞as' : 'C칩digo do Almoxarife' }}
      </label>

      <div class="input-group">
        <input [(ngModel)]="queryText" class="form-control" placeholder="Digite aqui..." />
      </div>

      <button class="btn btn-primary mt-2" (click)="searchByCategory()" [disabled]="!queryText">
        游늯 Consultar Registro
      </button>
    </div>
  </div>
</div>

  </div>
</div>